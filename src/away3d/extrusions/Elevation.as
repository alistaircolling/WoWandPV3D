package away3d.extrusions{   	import flash.display.BitmapData;	import away3d.core.math.Number3D;	public class Elevation {				public function Elevation()        {		}				public function generate(sourceBmd:BitmapData, channel:String = "r", subdivisionX:int = 10, subdivisionY:int = 10, scalingX:Number = 1, scalingY:Number = 1, elevate:Number = .5):Array		{			var w:int = sourceBmd.width;			var h:int = sourceBmd.height;			var i:int;			var j:int;			var x:Number = 0;			var y:Number = 0; 			var z:Number = 0;			var totalArray:Array = [];			var tmpArray:Array = [];			var color:uint;			var cha:Number;						for(j = h-1; j >-subdivisionY; j-=subdivisionY)			{				y = (j<0)? 0 : j;				tmpArray = [];								for(i = 0; i < w+subdivisionX; i+=subdivisionX)				{					x = (i<w-1)? i : w-1; 										color = (channel == "a")? sourceBmd.getPixel32(x, y) : sourceBmd.getPixel(x, y);										switch(channel){						case "a":							cha = color >> 24 & 0xFF;							break;						case "r":							cha = color >> 16 & 0xFF;							break;						case "g":							cha = color >> 8 & 0xFF;							break;						case "b":							cha = color & 0xFF;					}										z = cha*elevate;					tmpArray.push(new Number3D(x*scalingX, y*scalingY, z));				}								totalArray.push(tmpArray);			}						return totalArray;					}			}}